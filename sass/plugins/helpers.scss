@use "sass:list";
@use "sass:map";
@use "siimple:lib" as lib;

// @description Helpers plugin
@function helpers($options: lib.empty-map()) {
    $include: lib.get-in($options, "include", ());
    $exclude: lib.get-in($options, "exclude", ());
    // Generate all overflow helpers
    $overflow-helpers: lib.empty-list();
    @each $name,$value in lib.$overflow-properties {
        $overflow-helpers: list.append($overflow-helpers, lib.create-helper-plugin((
            "enabled": lib.is-enabled($name, $include, $exclude),
            "name": $value,
            "states": ("default"),
            "properties": ($value),
            "values": lib.$overflow-values,
        )));
    }
    // Generate all sizing helpers
    $sizing-helpers: lib.empty-list();
    @each $name,$props in lib.$sizing-properties {
        $screen-value: if(lib.starts-with($name, "height"), 100vh, 100vw);
        $sizing-helpers: list.append($sizing-helpers, lib.create-helper-plugin((
            "enabled": lib.is-enabled($name, $include, $exclude),
            "name": lib.get-in($props, "name"),
            "states": ("default"),
            "responsive": true,
            "properties": lib.get-in($props, "properties", ()),
            "scale": "sizes",
            "values": (
                "screen": $screen-value,
            ), 
        )));
    }
    // Generate all spacing helpers
    $spacing-helpers: lib.empty-list();
    @each $name,$props in lib.$spacing-properties {
        $spacing-helpers: list.append($spacing-helpers, lib.create-helper-plugin((
            "enabled": lib.is-enabled($name, $include, $exclude),
            "name": lib.get-in($props, "name"),
            "states": ("default"),
            "responsive": true,
            "properties": lib.get-in($props, "properties", ()),
            "important": true,
            "scale": "sizes",
        )));
    }
    // Generate all helpers
    @return lib.flatten((
        // Background helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("background.color", $include, $exclude),
            "name": "bg",
            "properties": ("background-color"),
            "states": ("default" "hover" "focus"),
            "scale": "backgrounds",
            "values": (
                "transparent": transparent,
                "black": lib.$black,
                "white": lib.$white,
            ),
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("background.size", $include, $exclude),
            "name": "bg",
            "states": ("default"),
            "properties": ("background-size"),
            "values": lib.$background-size-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("background.repeat", $include, $exclude),
            "name": "bg",
            "states": ("default"),
            "properties": ("background-repeat"),
            "values": lib.$background-repeat-values,
        )),
        // Cursor helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("cursor", $include, $exclude),
            "name": "cursor",
            "states": ("default"),
            "properties": ("cursor"),
            "values": lib.$cursor-values,
        )),
        // Display helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("display", $include, $exclude),
            "name": "d",
            "states": ("default"),
            "responsive": true,
            "properties": ("display"),
            "values": lib.$display-values,
        )),
        // Flexbox helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("display.flex", $include, $exclude),
            "name": "flex",
            "states": ("default"),
            "responsive": true,
            "properties": ("display"),
            "values": lib.$display-flex-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("flex", $include, $exclude),
            "name": "flex",
            "states": ("default"),
            "responsive": true,
            "properties": ("flex"),
            "values": lib.$flex-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("flex.direction", $include, $exclude),
            "name": "flex",
            "states": ("default"),
            "responsive": true,
            "properties": ("flex-direction"),
            "values": lib.$flex-direction-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("flex.wrap", $include, $exclude),
            "name": "flex",
            "states": ("default"),
            "responsive": true,
            "properties": ("flex-wrap"),
            "values": lib.$flex-wrap-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("flex.grow", $include, $exclude),
            "name": "flex",
            "states": ("default"),
            "responsive": true,
            "properties": ("flex-grow"),
            "values": lib.$flex-grow-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("flex.shrink", $include, $exclude),
            "name": "flex",
            "states": ("default"),
            "responsive": true,
            "properties": ("flex-shrink"),
            "values": lib.$flex-shrink-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("align.content", $include, $exclude),
            "name": "content",
            "states": ("default"),
            "responsive": true,
            "properties": ("align-content"),
            "values": lib.$align-content-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("align.items", $include, $exclude),
            "name": "items",
            "states": ("default"),
            "responsive": true,
            "properties": ("align-items"),
            "values": lib.$align-items-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("justify.content", $include, $exclude),
            "name": "justify",
            "states": ("default"),
            "responsive": true,
            "properties": ("justify-content"),
            "values": lib.$justify-content-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("order", $include, $exclude),
            "name": "order",
            "states": ("default"),
            "responsive": true,
            "properties": ("order"),
            "values": lib.$order-values,
        )),
        // Float helpers
        // TODO: we also need the clearfix helper
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("float", $include, $exclude),
            "name": "float",
            "states": ("default"),
            "responsive": true,
            "properties": ("float"),
            "values": lib.$float-values,
        )),
        // Font helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("font", $include, $exclude),
            "name": "font",
            "states": ("default"),
            "properties": ("font-family"),
            "scale": "fonts",
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("font.style", $include, $exclude),
            "name": "style",
            "states": ("default" "hover"),
            "properties": ("font-style"),
            "values": lib.$font-style-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("font.weight", $include, $exclude),
            "name": "weight",
            "states": ("default"),
            "properties": ("font-weight"),
            "values": lib.$font-weight-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("font.size", $include, $exclude),
            "name": "size",
            "states": ("default"),
            "properties": ("font-size"),
            "scale": "font-sizes",
        )),
        // Line height helper
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("line-height", $include, $exclude),
            "name": "lh",
            "states": ("default"),
            "properties": ("line-height"),
            "scale": "line-heights",
        )),
        // Opacity helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("opacity", $include, $exclude),
            "name": "opacity",
            "states": ("default" "hover"),
            "responsive": true,
            "properties": ("opacity"),
            "scale": "opacities",
        )),
        // Overflow helpers
        $overflow-helpers,
        // Position values
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("position", $include, $exclude),
            "name": "position",
            "states": ("default"),
            "responsive": true,
            "properties": ("position"),
            "values": lib.$position-values,
        )),
        // Text helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("text.white-space", $include, $exclude),
            "name": "text",
            "states": ("default"),
            "properties": ("white-space"),
            "values": lib.$text-white-space-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("text.overflow", $include, $exclude),
            "name": "text",
            "states": ("default"),
            "properties": ("text-overflow"),
            "values": lib.$text-overflow-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("text.transform", $include, $exclude),
            "name": "text",
            "states": ("default" "hover"),
            "properties": ("text-transform"),
            "values": lib.$text-transform-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("text.decoration", $include, $exclude),
            "name": "text",
            "states": ("default" "hover"),
            "properties": ("text-decoration"),
            "values": lib.$text-decoration-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("text.align", $include, $exclude),
            "name": "text",
            "states": ("default"),
            "responsive": true,
            "properties": ("text-align"),
            "values": lib.$text-align-values,
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("text.color", $include, $exclude),
            "name": "text",
            "properties": ("color"),
            "states": ("default" "hover"),
            "scale": "colors",
            "values": (
                "transparent": transparent,
                "black": lib.$black,
                "white": lib.$white,
            ),
        )),
        // Radius helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("border.radius", $include, $exclude),
            "name": "radius",
            "states": ("default" "hover"),
            "responsive": true,
            "properties": ("border-radius"),
            "scale": "radius",
        )),
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("shadow", $include, $exclude),
            "name": "shadow",
            "states": ("default"),
            "properties": ("box-shadow"),
            "scale": "shadows",
        )),
        // Sizing and spacing helpers
        $sizing-helpers,
        $spacing-helpers,
        // vertical-align helpers
        lib.create-helper-plugin((
            "enabled": lib.is-enabled("vertical-align", $include, $exclude),
            "name": "valign",
            "states": ("default"),
            "properties": ("vertical-align"),
            "values": lib.$vertical-align-values,
        )),
    ));
}
